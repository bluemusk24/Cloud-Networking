# Cloud-NetworkingLecture 1: Setup Cloud Environment for Windows, Ubuntu and Red-Hat Instances

# Create VPC on Amazon Cloud:

* select VPC and more
* autogenerated name : network-bootcamp
* IPv4 CIDR block : 10.200.123.0/24 (enough for the whole bootcamp)
* IPv6 CIDR block : No
* Number of Availability Zones (AZs) : 1
* Number of public subnets : 1
* Number of private subnets : 1
* NAT gateways : None
* VPC endpoints : None
* DNS options : Enable both
* Check the Preview and click create VPC. Wait for few seconds to complete creation

# Launch EC2 Instances:

* create 2 key-pair to login to instances:
- name: networkbootcampkey-ppk, select .ppk  --> For use with PuTTY
- name: networkbootcampkey-pem, select .pem  --> For use with OpenSSH

* Launch Windows Server:
- Amazon Machine Image (AMI) : Microsoft Windows Server 2025 Base 
- Instance type : t3 large
- Key pair name : networkbootcampkey-pem

* Network Settings Edit
- select created VPC (network-bootcamp-vpc)
- select created Public Subnet 
- Auto-assign public IP : Enabled

* create security group 
- name : allow-login
- Inbound Security Group Rules (type : rdp, Source type : MY IP)  --> when creating security group for the first time

* Security group rule 2 Edit 
- (Type : All Traffic, Source type : Custom, Source : 10.200.123.0/24) --> This allows any ingress/inbounds from any host sharing the same VPC with this instance. --> when creating security group for the first time

* Configure storage : 30gig
- Click Launch Server

# Note: All testing will be done via the Private Subnet (private-nic), while the Public Subnet (public-nic) will be used for connection to the instances.

* Go to Network Interfaces, click network interface
- Description : windows-server-private-nic
- Subnet : select the private subnet name
- Security groups : click created security group (allow-login) for connection to other private interfaces in the VPC
- Click create network interface, click view network interface
- Click Actions and attach  to : (VPC : network-bootcamp-vpc, Instance : created windows server)
- You should see Successfully attached network interface eni-08081d61ee819b6cf to instance i-00a34f81157dfa568 at the top.
- Head to created Windows EC2 Server, click Networking to see created Networking Interfaces (both Public and Private) addresses

* Connect to Windows Instance
- click connect, RDP client, download remote desktop file (you will a downloaded RDP windows file)
- click Get password, upload downloaded .pem file, click decrpt password.
- copy decrypted password (iTUi1DD60kp9qf=N@63w0e68nc9MlM2V)
- run downloaded RDP Windows file, paste the decrypted password and click ok, click yes --> you should see a created Administrator instance
- click close (X) to disconnect.

* Launch EC2 Ubuntu Server:
- Name : ubuntu-test-server
- Amazon Machine Image (AMI) : Ubuntu Server 24.04 LTS(HVM), SSD Volume Type
- Key pair name : networkbootcampkey-ppk

* Network Settings Edit
- select created VPC (network-bootcamp-vpc)
- select created Public Subnet 
- Auto-assign public IP : Enabled
- Select already created security group

* Configure storage : 16gig
- Click Launch Server

* Go to Network Interfaces, click network interface
- Description : ubuntu-server-private-nic
- Subnet : select the private subnet name
- Security groups : click created security group (allow-login) for connection to other private interfaces in the VPC
- Click create network interface, click view network interface
- Click Actions and attach  to : (VPC : network-bootcamp-vpc, Instance : created ubuntu-test-server). click Attach
- You should see Successfully attached network interface eni-0205b662da8a6da43 to instance i-0e3b6e9ad47641bf2
- Head to created Ubuntu EC2 Server, click Networking to see created Networking Interfaces (both Public and Private) addresses

* Putty and Pageant Download
- google putty, click https://www.chiark.greenend.org.uk/~sgtatham/putty/latest.html
- download putty.exe and pageant.exe (to load keys for putty pass through) --> for Windows system
- open pageant.exe, click add key encrypted, add .ppk file, close.
- open putty, click SSH, Auth, check Allow Agent forwarding
- on Putty, click Session, copy and paste EC2 ubuntu-test-server Public IPv4 address in the HostName IP session on Putty, click open. You should see an opened Putty terminal.

* Here, I could not connect to Putty. So, I had to edit security group of the ubuntu-test-server
- click Security on the server
- Edit inbound rules, add rules (Type : SSH, Source : My IP), click save rules.
- Try connect to ubuntu-test-server again via Putty. 
- Click Accept on the pop up server. 
- Type ubuntu to login and authenticate with the uploaded key to pageant.

* Launch EC2 RedHat Server: 
- same procedures as Ubuntu server except you login and authenticate with ec2-user on Putty.
- Also, change the name on the Network Interface to redhat-server-private-nic. this distinguishes it from ubuntu-server-private-nic created above

* Allocation of Public IP to the instances when shut off and turned back on (not necessary bcos you can always use generated IPv4 address):
- click Elastic IP
- Allocate Elastic IP address, click Allocate
- check the box, click actions, associate Elastic Address, select instance, select IP. click associate. (I got error here though)

Lecture 2: Automate VPC Deployment with CFN (Cloud Formation)

# Note: to upload an image from Readme in VScode to readme in GitHub repo, use this: ![](relative path of image)

* Clone Git repo on VSC
- create a virtual env with conda and activate the environment, code . to open vscode 
- git clone https://github.com/bluemusk24/Cloud-Networking.git --> clone the GitHub repo on vscode and cd.

* Create an Issue on the GitHub Repo
- create an issue with a title and a description. click create.
- click create a branch, check locally. Copy the below git codes and paste on vscode cloned terminal
git fetch origin
git checkout 1-create-cfn-template-for-setting-up-vpc-on-aws

* create template.yaml 
- ask chatGPT to create a CFN template to set up VPC with the VPC specs in Lecture 1

* Deploy on AWS Cloud Formation
- can you create me a bash script that will deploy the CFN template?
- Save the create file above as `deploy-vpc.sh` in the same directory as your template.yml
- aws sts get-caller-identity  --> inspect if AWS is installed. If installed, run below codes to deploy. Note: I did not do it bcos i already have VPC created manually on AWS. Terraform can also be used for this
- chmod u+x deploy-vpc.sh  --> do this once to make it executable
- ./deploy-vpc.sh

* push to GitHub issue branch
- git status
- git branch
- git add <name of files> eg. git add template.yml deploy-vpc.sh
- git status
- git commit -m 'commit to issue branch'
- git push https://github.com/bluemusk24/Cloud-Networking.git <name of branch> (eg. 1-create-cfn-template-for-setting-up-vpc-on-aws) --force
- when push to GitHub branch, click compare and pull request, make a description on the pull request and if needed, merge to the main branch. This is necessary to notify your team members.
